function id(e){return document.getElementById(e)}function bind(e,n,t){e.addEventListener?e.addEventListener(n,t,!1):e.attachEvent("on"+n,function(){t.call(e)})}function view(){return{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}}function addClass(e,n){var t=e.className.split(" ");if(!e.className)return void(e.className=n);for(var a=0;a<t.length;a++)if(t[a]===n)return;e.className+=" "+n}function removeClass(e,n){var t=e.className.split(" ");if(e.className)for(var a=0;a<t.length;a++)if(t[a]===n){t.splice(a,1),e.className=t.join(" ");break}}function fnLoad(){function e(){removeClass(t,"pageShow"),fnTab()}var n=(new Date).getTime(),t=id("welcome"),a=!0,i=!1,s=0;bind(t,"webkitTransitionEnd",e),bind(t,"transitionend",e),s=setInterval(function(){(new Date).getTime()-n>=5e3&&(i=!0),a&&i&&(clearInterval(s),t.style.opacity=0)},1e3)}function fnTab(){function e(){d=setInterval(function(){r++,r%=l.length,i()},2e3)}function n(e){o.style.transition="none",e=e.changedTouches[0],u=e.pageX,m=c,clearInterval(d)}function t(e){e=e.changedTouches[0];var n=e.pageX-u;c=m+n,o.style.WebkitTransform=o.style.transform="translateX("+c+"px)"}function a(){r=c/f,r=-Math.round(r),r<0&&(r=0),r>l.length-1&&(r=l.length-1),i(),e()}function i(){c=-r*f,o.style.transition="0.5s",o.style.WebkitTransform=o.style.transform="translateX("+c+"px)";for(var e=0;e<l.length;e++)removeClass(l[e],"active");addClass(l[r],"active")}var s=id("tabPic"),o=id("picList"),l=s.getElementsByTagName("nav")[0].children,r=0,c=0,f=view().w,d=0,u=0,m=0;bind(s,"touchstart",n),bind(s,"touchmove",t),bind(s,"touchend",a),e(),window.BfnScore||(fnScore(),window.BfnScore=!0)}function fnScore(){function e(e){for(var n=e.getElementsByTagName("a"),t=e.getElementsByTagName("input")[0],i=0;i<n.length;i++)n[i].index=i,bind(n[i],"touchstart",function(){for(var e=0;e<n.length;e++)e<=this.index?addClass(n[e],"active"):removeClass(n[e],"active");t.value=a[this.index]})}for(var n=id("score"),t=n.getElementsByTagName("li"),a=["好失望","没有想象的那么差","很一般","良好","棒极了"],i=0;i<t.length;i++)e(t[i]);fnIndex()}function fnInfo(e,n){e.innerHTML=n,e.style.WebkitTransform="scale(1)",e.style.opacity=1,setTimeout(function(){e.style.WebkitTransform="scale(0)",e.style.opacity=0},1e3)}function fnIndex(){function e(){o=n(),o?t()?fnIndexOut():fnInfo(s,"给景区添加标签"):fnInfo(s,"给景区评分")}function n(){for(var e=id("score"),n=e.getElementsByTagName("input"),t=0;t<n.length;t++)if(0==n[t].value)return!1;return!0}function t(){for(var e=id("indexTag"),n=e.getElementsByTagName("input"),t=0;t<n.length;t++)if(n[t].checked)return!0;return!1}var a=id("index"),i=a.getElementsByClassName("btn")[0],s=a.getElementsByClassName("info")[0],o=!1;bind(i,"touchend",e)}function fnIndexOut(){var e=id("mask"),n=id("index"),t=id("news");addClass(e,"pageShow"),addClass(t,"pageShow"),fnNews(),setTimeout(function(){e.style.opacity=1,n.style.WebkitFilter=n.style.filter="blur(5px)"},14),setTimeout(function(){t.style.transition="0.5s",e.style.opacity=0,n.style.WebkitFilter=n.style.filter="blur(0px)",t.style.opacity=1,removeClass(e,"pageShow")},3e3)}function fnNews(){var e=id("news"),n=e.getElementsByClassName("info")[0],t=e.getElementsByTagName("input");t[0].onchange=function(){"video"==this.files[0].type.split("/")[0]?(fnNewsOut(),this.value=""):fnInfo(n,"请上传视频")},t[1].onchange=function(){"image"==this.files[0].type.split("/")[0]?(fnNewsOut(),this.value=""):fnInfo(n,"请上传图片")}}function fnNewsOut(){var e=id("news"),n=id("form");addClass(n,"pageShow"),e.style.cssText="",removeClass(e,"pageShow"),formIn()}function formIn(){for(var e=id("form"),n=id("over"),t=id("formTag").getElementsByTagName("label"),a=e.getElementsByClassName("btn")[0],i=!1,s=0;s<t.length;s++)bind(t[s],"touchend",function(){i=!0,addClass(a,"submit")});bind(a,"touchend",function(){if(i){for(var s=0;s<t.length;s++)t[s].getElementsByTagName("input")[0].checked=!1;i=!1,addClass(n,"pageShow"),removeClass(e,"pageShow"),removeClass(a,"submit"),over()}})}function over(){var e=id("over"),n=e.getElementsByClassName("btn")[0];bind(n,"touchend",function(){removeClass(e,"pageShow")})}